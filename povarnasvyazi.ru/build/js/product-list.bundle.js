(()=>{var t,e={8625:t=>{var e=Object.defineProperty,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;t.exports={functional:!0,render(t,e){const{_c:i,_v:l,data:n,children:c=[]}=e,p=n,{class:u,staticClass:d,style:h,staticStyle:v,attrs:_={}}=p,m=((t,e)=>{var a={};for(var i in t)s.call(t,i)&&e.indexOf(i)<0&&(a[i]=t[i]);if(null!=t&&r)for(var i of r(t))e.indexOf(i)<0&&o.call(t,i)&&(a[i]=t[i]);return a})(p,["class","staticClass","style","staticStyle","attrs"]);return i("svg",((t,e)=>{for(var i in e||(e={}))s.call(e,i)&&a(t,i,e[i]);if(r)for(var i of r(e))o.call(e,i)&&a(t,i,e[i]);return t})({class:[u,d],style:[h,v],attrs:Object.assign({width:"16",height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},m),c.concat([i("path",{attrs:{d:"M12.491 7.693v6.094m0 0l1.842-1.796m-1.842 1.796L10.65 11.99M10.169 7.292H2.333m5.224 3.057H2.333m2.613 3.057H2.335M12.78 4.234H2.333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},8400:t=>{var e=Object.defineProperty,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;t.exports={functional:!0,render(t,e){const{_c:i,_v:l,data:n,children:c=[]}=e,p=n,{class:u,staticClass:d,style:h,staticStyle:v,attrs:_={}}=p,m=((t,e)=>{var a={};for(var i in t)s.call(t,i)&&e.indexOf(i)<0&&(a[i]=t[i]);if(null!=t&&r)for(var i of r(t))e.indexOf(i)<0&&o.call(t,i)&&(a[i]=t[i]);return a})(p,["class","staticClass","style","staticStyle","attrs"]);return i("svg",((t,e)=>{for(var i in e||(e={}))s.call(e,i)&&a(t,i,e[i]);if(r)for(var i of r(e))o.call(e,i)&&a(t,i,e[i]);return t})({class:[u,d],style:[h,v],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},m),c.concat([i("path",{attrs:{d:"M16.84 20.164V6.546M20.917 16.068l-4.078 4.097-4.077-4.097M6.911 3.833V17.45M2.833 7.929l4.078-4.097L10.99 7.93",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},6972:(t,e,r)=>{"use strict";var s=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"list product-list page__section"},[e("div",{staticClass:"content-container"},[e("div",{staticClass:"list__grid"},[e("div",{staticClass:"list__filter"},[e("ListFilter",{attrs:{filter:t.filterParams,labels:t.filterListItemLabels,"is-open-on-desktop":!0},on:{applyFilter:t.applyFilter,resetFilter:t.resetFilter}}),t._v(" "),e("SortSelect",{staticClass:"list__sort-select list__sort-select_mobile",attrs:{options:t.sortOptions},model:{value:t.sortValue,callback:function(e){t.sortValue=e},expression:"sortValue"}})],1),t._v(" "),e("div",{staticClass:"list__right-col",style:{opacity:t.isLoading?.5:1}},[e("div",[e("ProductSearch",{attrs:{suggests:t.suggests},on:{"select-suggest":t.onSelectSuggest,"submit-search":t.applyTextQuery},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),e("SortSelect",{staticClass:"list__sort-select list__sort-select_desktop",attrs:{options:t.sortOptions},model:{value:t.sortValue,callback:function(e){t.sortValue=e},expression:"sortValue"}})],1),t._v(" "),e("DistanceFilter"),t._v(" "),e("CatalogNav",{staticClass:"product-list__nav",attrs:{items:t.navItems}}),t._v(" "),t.dishes&&0!==t.dishes.length?t._e():e("div",[e("div",{staticClass:"empty-chat"},[e("div",{staticClass:"empty-chat__text empty-chat__text--small empty-chat__text--transform-none"},[t.additionalEmptyResultText?e("p",{domProps:{innerHTML:t._s(t.additionalEmptyResultText)}}):e("p",[t._v("\n                К сожалению, мы не нашли ни одного блюда\n                по вашему запросу 🙁 Пожалуйста, сбросьте фильтр, чтобы\n                увидеть весь список блюд\n\n                "),e("br"),t._v(" "),e("br"),t._v("\n                Попробуйте изменить условия поиска или напишите нам в Telegram\n                "),e("a",{attrs:{href:"https://t.me/povar_help",target:"_blank"}},[t._v("\n                  @povar_help\n                ")]),t._v("\n                Мы поможем подобрать блюдо и изготовителя в вашем городе”\n              ")])]),t._v(" "),t._m(0)])]),t._v(" "),e("div",{staticClass:"list__cards list__cards--xs-2"},[t._l(t.dishes,(function(r,s){return[e("ProductCard",{key:`product-${r.id}`,attrs:{item:r,"add-to-cart":!0,"in-list":!0}}),t._v(" "),t.getPromo(s)?e("PromoCard",{key:`promo-${t.getPromo(s).id}`,attrs:{item:t.getPromo(s)}}):t._e()]}))],2),t._v(" "),e("LookLoader",{attrs:{data:t.pageData},on:{"pagination-look":t.onMoreClick}})],1)])])])};s._withStripped=!0;var o=r(6796),a=r(3149),i=r(8482),l=r(3900),n=r(5204),c=function(){var t=this,e=t._self._c;return t._self._setupProxy,t.data&&t.data.last_page>1&&t.data.current_page<t.data.last_page?e("div",{staticClass:"pagination",class:t.cssClass},[e("div",{staticClass:"pagination__more-button-wrapper"},[e("button",{staticClass:"pagination__more-button btn btn--clear",domProps:{innerHTML:t._s("Ещё")},on:{click:function(e){return t.onMoreClick()}}})])]):t._e()};c._withStripped=!0;var p=r(6450),u=r(3909);Object.defineProperty,Object.getOwnPropertyDescriptor;let d=class extends((0,o.Wr)(p.Z,o.w3)){onMoreClick(){this.$emit("pagination-click",{link:{url:this.data.next_page_url}})}};d=((t,e,r,s)=>{for(var o,a=e,i=t.length-1;i>=0;i--)(o=t[i])&&(a=o(a)||a);return a})([(0,o.wA)({components:{SvgSymbol:u.Z}})],d);const h=d;var v=r(5440);const _=(0,v.Z)(h,c,[],!1,null,null,null).exports;var m=r(2174),f=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"promo-card"},[e("div",{staticClass:"promo-card__picture",on:{click:t.showPopup}},[e("BackendImage",{staticClass:"promo-card__img",attrs:{image:t.item.picture,draggable:"false",loading:t.pictureLoading}})],1),t._v(" "),e("div",{staticClass:"promo-card__name"},[t._v("\n    "+t._s(t.item.name)+"\n  ")]),t._v(" "),e("div",{staticClass:"promo-card__text"},[t._v("\n    "+t._s(t.item.previewText)+"\n  ")]),t._v(" "),e("div",{staticClass:"promo-card__bottom"},[e("div",{staticClass:"promo-card__price"},[t._v("\n      "+t._s(t.item.price)+"\n    ")]),t._v(" "),e("button",{staticClass:"promo-card__btn btn",on:{click:t.showPopup}},[t._v("\n      "+t._s(t.item.buttonText||"Заказать")+"\n    ")])])])};f._withStripped=!0;var g=r(2952),y=r(4280),b=r(449),w=r(4296),O=r(1952),P=r(3962),C=r(454),x=r(6083),S=r(7424),k=Object.defineProperty,j=Object.getOwnPropertyDescriptor,L=(t,e,r,s)=>{for(var o,a=s>1?void 0:s?j(e,r):e,i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s?o(e,r,a):o(a))||a);return s&&a&&k(e,r,a),a};let F=class extends o.w3{constructor(){super(...arguments),this.popupData=null,this.loading=!1}showPopup(){return((t,e,r)=>new Promise(((e,s)=>{var o=t=>{try{i(r.next(t))}catch(t){s(t)}},a=t=>{try{i(r.throw(t))}catch(t){s(t)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);i((r=r.apply(t,null)).next())})))(this,0,(function*(){var t,e;if(!this.loading){if(this.loading=!0,!this.popupData){const t=yield(0,x.LK)("/popup/callback/form");t&&t.success&&(this.popupData=t.data)}this.$eventBus.$emit("open-popup",{type:"callback-form",componentProps:{formData:null==(t=this.popupData)?void 0:t.formData,popup:null==(e=this.popupData)?void 0:e.popup,promoCardId:this.item.id}}),(0,S.s)("click_promocard"),this.loading=!1}}))}};L([(0,o.fI)({required:!0})],F.prototype,"item",2),L([(0,o.fI)({default:"lazy"})],F.prototype,"pictureLoading",2),F=L([(0,o.wA)({components:{SvgSymbol:u.Z,CountForm:b.Z,ProductCardCook:y.Z,ProductCookLocation:P.Z,Price:w.Z,BackendImage:g.Z,AddToBasketButton:O.Z,ProductLabel:C.Z}})],F);const D=F,V=(0,v.Z)(D,f,[],!1,null,null,null).exports;var Z=r(3682),I=r(8843),M=r(2692),T=r(4792),$=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"sort-select"},[e("div",{staticClass:"sort-select__list"},[e("div",{staticClass:"sort-select__list-row"},t._l(t.options,(function(r){return e("div",{key:t.getOptionKey(r),staticClass:"sort-select__list-col"},[e("button",{class:["sort-select__list-item",t.isOptionActive(r)&&"sort-select__list-item_active"],attrs:{type:"button"},on:{click:()=>t.selectOption(r)}},[e("span",{class:["sort-select__list-item-icon","asc"===r.order&&"sort-select__list-item-icon_rotated"]},[e("SortDescSvg")],1),t._v(" "),e("span",{staticClass:"sort-select__list-item-text"},[t._v(t._s(r.name))])])])})),0)]),t._v(" "),e("VPopover",{attrs:{open:t.popoverOpened,trigger:"manual",placement:"bottom-end","popover-class":"sort-select__popover"},on:{hide:t.closePopover}},[e("button",{staticClass:"sort-select__popover-button",attrs:{type:"button"},on:{click:t.openPopover}},[e("SwapSvg"),t._v(" "),e("span",[t._v(t._s(t.value.name))])],1),t._v(" "),e("div",{attrs:{slot:"popover"},slot:"popover"},[e("div",{staticClass:"sort-select__popover-items-container"},t._l(t.options,(function(r){return e("button",{key:t.getOptionKey(r),class:["sort-select__popover-item",t.isOptionActive(r)&&"sort-select__popover-item_active"],attrs:{type:"button"},on:{click:()=>t.selectOption(r)}},[t._v("\n          "+t._s(r.name)+"\n        ")])})),0)])])],1)};$._withStripped=!0;var A=r(8625),E=r.n(A),B=r(8400),H=r.n(B),K=Object.defineProperty,R=Object.getOwnPropertyDescriptor,q=(t,e,r,s)=>{for(var o,a=s>1?void 0:s?R(e,r):e,i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s?o(e,r,a):o(a))||a);return s&&a&&K(e,r,a),a};let U=class extends o.w3{constructor(){super(...arguments),this.popoverOpened=!1}getOptionKey(t){return`${t.field}|${t.order}`}isOptionActive(t){return this.value&&this.getOptionKey(this.value)===this.getOptionKey(t)}selectOption(t){this.$emit("input",t),this.closePopover()}openPopover(){this.popoverOpened=!0}closePopover(){this.popoverOpened=!1}};q([(0,o.fI)({type:Object,default:null})],U.prototype,"value",2),q([(0,o.fI)({type:Array,required:!0})],U.prototype,"options",2),U=q([(0,o.wA)({components:{SortDescSvg:E(),SwapSvg:H()}})],U);const z=U,N=(0,v.Z)(z,$,[],!1,null,null,null).exports;var Q=Object.defineProperty,W=Object.defineProperties,X=Object.getOwnPropertyDescriptor,G=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,et=(t,e,r)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rt=(t,e)=>{for(var r in e||(e={}))Y.call(e,r)&&et(t,r,e[r]);if(J)for(var r of J(e))tt.call(e,r)&&et(t,r,e[r]);return t},st=(t,e)=>W(t,G(e)),ot=(t,e,r,s)=>{for(var o,a=s>1?void 0:s?X(e,r):e,i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s?o(e,r,a):o(a))||a);return s&&a&&Q(e,r,a),a},at=(t,e,r)=>new Promise(((s,o)=>{var a=t=>{try{l(r.next(t))}catch(t){o(t)}},i=t=>{try{l(r.throw(t))}catch(t){o(t)}},l=t=>t.done?s(t.value):Promise.resolve(t.value).then(a,i);l((r=r.apply(t,e)).next())}));let it=class extends((0,o.Wr)(T.Z,o.w3)){constructor(){super(...arguments),this.localFilterParams=this.filterParams,this.dishes=this.initialDishes,this.pageData=this.initialPageData,this.promoCards=this.initialPromoCards,this.isLoading=!1,this.searchValue=this.initialFilter.search||"",this.currentFilter=this.initialFilter||{},this.suggests=[],this.sortOptions=[{field:"rating",name:"По рейтингу",order:"desc"},{field:"price",name:"По возрастанию цены",order:"asc"},{field:"price",name:"По убыванию цены",order:"desc"},{field:"new",name:"По новизне",order:"desc"}],this.sortValue=this.sortOptions[0]}get filterListItemLabels(){const t={};for(const e of this.localFilterParams){t[e.name]={};for(const r of e.items||[])t[e.name][r.value]=r.label}return t}searchChanged(){this.searchLoadSuggests(this.searchValue)}handleSortValueChanged(){this.applyFilter(this.currentFilter)}mounted(){const t=new URLSearchParams(location.search),e=t.get("sort"),r=t.get("order"),s=this.sortOptions.find((t=>t.field===e&&t.order===r))||this.sortOptions[0];this.sortValue=s}searchLoadSuggests(t){return at(this,null,(function*(){if(0===t.length||t.length<3)return;const e=yield(0,x.uz)("/menu/suggests",{name:t});e.success&&(this.suggests=e.data.suggests)}))}onPageClick(t){const{link:e}=t;this.load(e.url,!1,!1)}onMoreClick(t){const{link:e}=t;this.load(e.url,!1,!1,!0)}onSelectSuggest(t){this.searchValue=t,this.currentFilter.search=t,this.applyFilter(this.currentFilter)}applyTextQuery(t){return at(this,arguments,(function*({changeUrl:t}){this.applyFilter(this.currentFilter,null==t||t)}))}showAllCities(){this.applyFilter(st(rt({},this.currentFilter),{all:"1"})),this.$eventBus.$emit("set-filter",{all:"1"})}applyFilter(t,e=!0){this.currentFilter=st(rt({},t),{search:this.searchValue||"",sort:this.sortValue.field,order:this.sortValue.order});const r=(0,x.Ie)(this.currentFilter),s=r?"?"+r:"",o=window.location.origin+window.location.pathname+s;this.load(o,e)}resetFilter(){this.currentFilter={},this.searchValue="",this.suggests=[],this.$eventBus.$emit("reset-filter");const t=window.location.origin+"/menu";this.load(t)}getPromo(t){if((t-=1)%4==3){const e=(t+1)/4-1;return this.promoCards[e]}return null}load(t,e=!0,r=null,s=!1){return at(this,null,(function*(){r=null!==r&&r,this.isLoading=!0;const o=new URL(t),a=yield(0,x.LK)(o.toString());if(this.isLoading=!1,a.success){s?this.dishes.push(...a.data.dishes):(this.dishes=a.data.dishes,this.promoCards=a.data.promoCards),this.pageData=a.data.pageData,document.querySelector(".js-total-count").innerHTML=this.pageData.total.toString();const o=window.location.href;if(e&&o!==t)try{history.pushState(null,"",t)}catch(t){console.error(t)}this.localFilterParams=a.data.filterData,r&&(0,M.X5)(this.$el)}else console.error("Ошибка загрузки данных")}))}};ot([(0,o.fI)({default:()=>[]})],it.prototype,"initialDishes",2),ot([(0,o.fI)({default:()=>[]})],it.prototype,"initialPageData",2),ot([(0,o.fI)({default:()=>[]})],it.prototype,"initialFilter",2),ot([(0,o.fI)({default:()=>[]})],it.prototype,"filterParams",2),ot([(0,o.fI)({default:()=>[]})],it.prototype,"navItems",2),ot([(0,o.fI)({default:()=>[]})],it.prototype,"initialPromoCards",2),ot([(0,o.fI)({default:()=>[]})],it.prototype,"additionalEmptyResultText",2),ot([(0,o.RL)("searchValue")],it.prototype,"searchChanged",1),ot([(0,o.RL)("sortValue")],it.prototype,"handleSortValueChanged",1),ot([(0,I.Z)({time:300})],it.prototype,"searchLoadSuggests",1),it=ot([(0,o.wA)({components:{LookLoader:n.Z,MoreButton:_,CatalogNav:a.Z,ProductCard:m.Z,DistanceFilter:i.Z,ProductSearch:Z.Z,ListFilter:l.Z,PromoCard:V,SortSelect:N}})],it);const lt=it;var nt=(0,v.Z)(lt,s,[function(){var t=this._self._c;return this._self._setupProxy,t("div",{staticClass:"empty-chat__image-wrap empty-chat__image-wrap--small"},[t("div",{staticClass:"empty-chat__image js-parallax"},[t("div",{attrs:{"data-depth":"0.2"}},[t("img",{attrs:{src:"/images/empty-chat/potato.png",alt:""}})])])])}],!1,null,null,null);const ct=nt.exports;var pt=r(1793),ut=r(4907);class dt extends ut.Z{init(){var t;super.init(),(0,pt.Z)(null==(t=this.el)?void 0:t.querySelectorAll(".vue-product-list"),ct)}}new dt(document.querySelector("body"))}},r={};function s(t){var o=r[t];if(void 0!==o)return o.exports;var a=r[t]={id:t,loaded:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,t=[],s.O=(e,r,o,a)=>{if(!r){var i=1/0;for(p=0;p<t.length;p++){r=t[p][0],o=t[p][1],a=t[p][2];for(var l=!0,n=0;n<r.length;n++)(!1&a||i>=a)&&Object.keys(s.O).every((t=>s.O[t](r[n])))?r.splice(n--,1):(l=!1,a<i&&(i=a));if(l){t.splice(p--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[r,o,a]},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),s.j=921,(()=>{var t={921:0};s.O.j=e=>0===t[e];var e=(e,r)=>{var o,a,i=r[0],l=r[1],n=r[2],c=0;if(i.some((e=>0!==t[e]))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(n)var p=n(s)}for(e&&e(r);c<i.length;c++)a=i[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(p)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var o=s.O(void 0,[351],(()=>s(6972)));o=s.O(o)})();